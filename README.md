# Проектная работа "Веб-ларек"

Стек: HTML, SCSS, TS, Webpack

Структура проекта:

- src/ — исходные файлы проекта
- src/components/ — папка с JS компонентами
- src/components/base/ — папка с базовым кодом

Важные файлы:

- src/pages/index.html — HTML-файл главной страницы
- src/types/index.ts — файл с типами
- src/index.ts — точка входа приложения
- src/styles/styles.scss — корневой файл стилей
- src/utils/constants.ts — файл с константами
- src/utils/utils.ts — файл с утилитами

## Установка и запуск

Для установки и запуска проекта необходимо выполнить команды

```
npm install
npm run start
```

или

```
yarn
yarn start
```

## Сборка

```
npm run build
```

или

```
yarn build
```

# Описание данных

Архитектура приложения описана по шаблону проектирования Model-View-Presenter

## Слой данных (Model)

### Базовые компоненты

Класс Model - класс данных
На входе получает данные data
Имеет методы:
emitChanges - Сообщить всем что модель поменялась

### Компоненты предметной области

Класс ProductItem - класс данных товара
Хранит данные выбранной на странице карточки
Имеет методы:
getSelectedItem - получает данные при выборе карточки
и событие emitChanges 'card:selected', что должно произойти при выборе карточки

Класс AppState - класс для работы с данными:
Имеет методы:
setProducts - на главной странице получение списка всех продуктов
setPreview - на главной странице открыть продукт
getBasketProducts - в корзине можем добавить или удалить продукт (массив)
getTotal -в корзине получить общую сумму
clearBasket - очистить корзину после размещения заказа
togglePayment - в оформлении выбор способа оплаты

## Слой отображения (View)

### Базовые компоненты

Класс Component - класс отображения
На входе получает разметку контейнера
Имеет методы инструментарии для работы с DOM в дочерних компонентах
-toggleClass - Переключить класс;
-setText - Установить текстовое содержимое;
-setDisabled -Сменить статус блокировки;
-render - Вернуть корневой DOM-элемент;

### Общие компоненты

Класс Modal - отображение модальных окон
Наследуется от базового класса Component
На входе получает разметку контейнера и событие
Возвращеает отрендеренную разметку
Имеет методы:
-open;
-close;
-render;
-set content - получает контент в зависимости от события
Используется при:
-открыть карточку товара;
-открыть корзину;
-оформлении товара;
-успешное оформление товара.

Класс Form - отображение формы для заказа
Наследуется от базового класса Component
На входе получает разметку контейнера и событие
Имеет методы:
onInputChange - изменение инпутов при вводе
set valid - блокировка кнопки при незаполнении инпутов

### Компоненты предметной области

Класс Page - отображение главной страницы
Наследуется от базового класса Component
На входе получает разметку контейнера и событие
Имеет методы:
-set counter - отображение счетчика корзины
-set products - получение массива данных продуктов
-set locked - менить статус прокурутки страницы при открытии Моdal;

Класс Card - отображение карточек продуктов
Используется в отображении главной страницы (список продуктов),
в модальном окне при выборе продукта и в корзине (список выбранных продуктов)
Наследуется от базового класса Component
На входе получает разметку контейнера и actions (действие с кнопкой)
Имеет методы:
get category - установка категории
get id - для вобора продукта
get title - установка названия
get image - установка названия картинки
get price - установка цены

Класс Basket - отображение корзины
Наследуется от базового класса Component
На входе получает разметку контейнера и событие
Имеет методы:
set items - получает массив выбранных товаров
set total - полная цена

Класс OrderPayment
Наследуется от общего класса Form
Имеет методы:
set payment
set address

Класс OrderForm
Наследуется от общего класса Form
Имеет методы:
set phone
set email

Класс Success - отображение успешного оформления заказа
Наследуется от базового класса Component
На входе получает разметку контейнера и actions(действие с кнопкой)
Закрытие

## Слой презентера (Presenter)

### Базовые компоненты

Класс EventEmitter - базовый класс, связующий между View и Model, брокер событий
Имеет методы:
on - Установить обработчик на событие
off - Снять обработчик с события
emit - Инициировать событие с данными
onAll - Слушать все события
offAll - Сбросить все обработчики
trigger - Сделать коллбек триггер, генерирующий событие при вызове

## API

Класс api - базовый класс api работы с сервером
Имеет методы:
handleResponse - проверка статуса
get - получение данных
post - отправить данные

Класс LarekAPI
Наследуется от базового класса api
Имеет методы:
getProductList - получение списка товаров
getProductItem - получение товара определенного
orderProducts - отправка и оформление заказа
