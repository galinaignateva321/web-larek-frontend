# Проектная работа "Веб-ларек"

Стек: HTML, SCSS, TS, Webpack

Структура проекта:

- src/ — исходные файлы проекта
- src/components/ — папка с JS компонентами
- src/components/base/ — папка с базовым кодом

Важные файлы:

- src/pages/index.html — HTML-файл главной страницы
- src/types/index.ts — файл с типами
- src/index.ts — точка входа приложения
- src/styles/styles.scss — корневой файл стилей
- src/utils/constants.ts — файл с константами
- src/utils/utils.ts — файл с утилитами

## Установка и запуск

Для установки и запуска проекта необходимо выполнить команды

```
npm install
npm run start
```

или

```
yarn
yarn start
```

## Сборка

```
npm run build
```

или

```
yarn build
```

# Описание данных

Архитектура приложения описана по шаблону проектирования Model-View-Presenter

## Слой данных (Model)

### Базовые компоненты

Класс Model - класс данных  
На входе получает данные data  
Имеет методы:  
emitChanges - Сообщить всем что модель поменялась

### Компоненты предметной области

Класс ProductItem - класс данных товара  
Хранит данные продукта

Класс AppState - класс для работы с данными:  
Имеет методы:  
setProducts - на главной странице получение списка всех продуктов  
addProductToBasket - добавить товар в корзину  
clearBasket - очистить данные из корзину после размещения заказа  
removeItemFromBasket - удалить товар с корзины  
getBasketAmount - количество товаров в корзине  
getBasketProducts - массив товаров в корзине  
getTotal -в корзине получить общую сумму  
clearOrderData - сбросить данные  
setOrderField - данные заказа при изменении форм(?)  
validateContacts - валидации формы контактов  
validateOrder - валидации формы заказа  
setItems - id заказываемых продуктов  
togglePayment - в оформлении выбор способа оплаты

## Слой отображения (View)

### Базовые компоненты

Класс Component - класс отображения  
На входе получает разметку контейнера  
Имеет методы инструментарии для работы с DOM в дочерних компонентах  
-setText - Установить текстовое содержимое;  
-setDisabled -Сменить статус блокировки;  
-setImage - Установить изображение  
-render - Вернуть корневой DOM-элемент;

### Общие компоненты

Класс Modal - отображение модальных окон  
Наследуется от базового класса Component  
На входе получает разметку контейнера и событие  
Возвращеает отрендеренную разметку  
Имеет методы:  
-open;  
-close;  
-render;  
-set content - получает контент в зависимости от события  
Используется при:  
-открыть карточку товара;  
-открыть корзину;  
-формы оформлении товара;  
-успешное оформление товара.

Класс Form - отображение формы для заказа  
Наследуется от базового класса Component  
На входе получает разметку контейнера и событие  
Имеет методы:  
onInputChange - изменение инпутов при вводе  
set errors - отображение ошибок валидации  
set valid - блокировка кнопки при незаполнении инпутов

### Компоненты предметной области

Класс Page - отображение главной страницы  
Наследуется от базового класса Component  
На входе получает разметку контейнера и событие  
Имеет методы:  
-set counter - отображение счетчика корзины  
-set shop - получение массива данных продуктов  
-set locked - отменить прокурутку страницы при открытии Моdal;

Класс Card - отображение карточек продуктов  
Наследуемые классы используются в отображении главной страницы (список продуктов) class ShopItem,  
в модальном окне при выборе продукта class PreviewItem,  
в корзине (список выбранных продуктов) class BasketItem.  
Наследуется от базового класса Component  
На входе получает разметку контейнера и actions (действие с кнопкой)  
Имеет методы:  
set category - установка категории  
set id - для вобора продукта  
set title - установка названия  
set image - установка названия картинки  
set price - установка цены  
set buttonText - установка текста кнопки (в корзине, продано)

Класс Basket - отображение корзины  
Наследуется от базового класса Component  
На входе получает разметку контейнера и событие  
Имеет методы:  
set list - получает массив товаров в корзине  
set total - полная цена

Класс Order  
Наследуется от общего класса Form  
вешает слушатели на кнопки выбора способа оплаты  
используется для установки выбора способа оплаты
Имеет методы:  
clearOrder - сброс инпутов

Класс Contacts  
Наследуется от общего класса Form  
Имеет методы:  
set phone установка номера тел  
set email установка email  
clearContacts - сброс инпутов

Класс Success - отображение успешного оформления заказа  
Наследуется от базового класса Component  
На входе получает разметку контейнера и actions(действие с кнопкой)  
Имеет методы:  
set description- для установки текста списано n синапсов

## Слой презентера (Presenter)

### Базовые компоненты

Класс EventEmitter - базовый класс, связующий между View и Model, брокер событий  
Имеет методы:  
on - Установить обработчик на событие  
off - Снять обработчик с события  
emit - Инициировать событие с данными  
onAll - Слушать все события  
offAll - Сбросить все обработчики  
trigger - Сделать коллбек триггер, генерирующий событие при вызове

## API

Класс api - базовый класс api работы с сервером  
Имеет методы:  
handleResponse - проверка статуса  
get - получение данных  
post - отправить данные

Класс LarekAPI  
Наследуется от базового класса api  
Имеет методы:  
getProductList - получение списка товаров  
getProductItem - получение товара определенного  
orderProducts - отправка и оформление заказа
